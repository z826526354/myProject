## 响应式布局——计算viewport

利用 js 计算viewport的值，实现真正意义上的自适应

```html
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no minimum-scale=1 maximum-scale=1" id='view'>
    <script>
    	(function () {
            var curWidth = document.documentElement.clientWidth;
            var curWidth = window.innerWidth;
            var curWidth = window.screen.width;
            
            console.log(curWidth);
            
            var targetWidth = 375;
            var scale = curWidth / targetWidth;
            console.log(scale);
            
            var view = document.getElementById('view');
            console.log(view.content);
            
            view.content='initial-scale=' + scale +',user-scalable=no, minimum-scale='+ scale +', maximum-scale='+ scale +''; 
            
        })()
    </script>
</head>
```



### DPR适配

```html
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no minimum-scale=1 maxmum-scale=1" id='view'>
    <script>
    	(function () {
            // 1 / DPR
            var meta = document.querySelector('meta[name="viewport"]');
            var scale = 1 / window.devicePixelRatio;
            
            if (!meta) {
                // 这个条件成立，证明用户没有设置我们需要的meta标签
                meta = document.createElement('meta');
                meta.name = "viewport";
                meta.content = 'width=device-width,initial-scale='+scale+',user-scalable=no,minimum-scale='+scale+',maximum-scale='+scale+'';
                document.head.appendChild(meta)
            }else {
                meta.setAttribute('content', 'width=device-width,initial-scale='+scale+',user-scalable=no,minimum-scale='+scale+',maximum-scale='+scale+'');
            }
        })()
    </script>
</head>
```



### rem 与 em

- #### em

  作为`font-size`的单位时，其代表父元素的字体大小，作为其他属性单位时，代表自身字体大小

  ```css
  font-size=20px; /*比如父级设置为20px， 那么子集的1em = 20px*/
  /*
  
  注意：
  	1. chrom下有最小的字体限制，必须为12px,所以最小值不能小于12px
  	2. 如果两个一样的元素，但是里面的字体不一样，那就不可以统一设置了。
  	   或者元素字体变化了，就又要统一设置一遍。
  */
  ```

- #### rem（栅格系统的原型）

  CSS3新增的一个相对单位，是相对于根元素字体大小

  root和html

  ```css
  2rem=40px
  ```

  